{% extends "base.html" %}

{% block content %}
<title>Submit predictions</title>
<h1>Submit predictions</h1>
<form id="submission-form" action="" method=post enctype=multipart/form-data>
    <div class="fieldtext">Submission file:</div>
    <div class="fieldvalue">
        <select name="competitions">
            {% for c in competitions %}
            <option value="{{ c.id }}">{{ c.name }}</option>
            {% endfor %}
        </select><br/>
        <label for="imageUpload" class="uploadBox" style="width: 20%">
          <p id="uploadMsg">Filename will appear here after file has been selected</p>
          <input id="imageUpload" class="imageUploadInput" type="file" name="file">
        </label>
        <div class="custom-file" style="width: 20%">
          <input type="file" class="custom-file-input" name="file" id="customFile" onchange="readURL(this);">
          <label class="custom-file-label" for="customFile" onclick="alertFilename()" value="alert">Choose file</label>
        </div>
        <!-- <input type=file name=file> -->
    </div>
    <div class="fieldtext">Public comment:</div>
    <div class="fieldvalue">
        <textarea id="comment" name="comment"
                               placeholder="Comment (max 500 chars)"
                               maxlength=500 rows=10 cols=40></textarea>
    </div>
    <div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </div>
    <script type="text/javascript">
    function() {
      let input = this.files[0];
      let text;
      if (input) {
        //process input
        text = imageUpload.value.replace("C: \\fakepath\\", "");
      } else {
        text = “Please select a file”;
      }
      uploadMsg.innerHTML = text;
    };
    </script>
</form>

{% with messages = get_flashed_messages() %}
{% if messages %}
<ul class=flashes style="color: red">
    {% for message in messages %}
    <li>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
{% endwith %}

{% endblock %}
